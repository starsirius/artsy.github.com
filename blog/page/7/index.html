
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Artsy Engineering</title>
  <meta name="author" content="Artsy">

  
  <meta name="description" content="Artsy Folio, our free iPad app for Gallery Partners, had been in the App Store for a couple of weeks before the iPad with a Retina display was &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://artsy.github.io/blog/page/7">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js"></script>
  <script src="/javascripts/underscore-min.js"></script>
  <script src="/javascripts/jquery-1.11.3.min.js"> </script>
  <script src="/javascripts/jquery.scrollTo.min.js"></script>
  <script src="/javascripts/backbone-min.js"></script>
  <script src="/javascripts/moment.js"></script>
  <script src="/javascripts/noframework.waypoints.min.js"></script>
  <script src="/javascripts/gradient_fade.js"></script>
  <script src="/javascripts/sticky.min.js"></script>
  <script type="text/javascript" src="http://fast.fonts.net/jsapi/f7f47a40-b25b-44ee-9f9c-cfdfc8bb2741.js"></script>
  
  <link href="/atom.xml" rel="alternate" title="Artsy Engineering" type="application/atom+xml">
  <!--[if IE 8]>
<link href="/stylesheets/custom/ie_font.css" type="text/css">
<![endif]-->

<!--- MathJax Configuration -->
<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12450662-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>


<body>
  <div id="logo-container">
    <div id="lrg-mark">
      <a href="https://www.artsy.net/"><img src="/images/fixed_logo.png"></a>
    </div>
  </div>
  <header id="banner"><div id="header">
  <div class="header-navigation">
    <ul>
      <li><a href="https://developers.artsy.net/">API</a></li>
      <li><a href="https://www.artsy.net/jobs">Careers</a></li>
      <li><a href="http://twitter.com/artsyopensource">@artsyopensource</a></li>
      <li><a href="http://www.artsy.net/">Artsy.net</a></li>
    </ul>
    <span class="header-section-title">
      
        <a href="http://artsy.github.io/open-source">Open Source</a>
      
    </span>
  </div>

  <div class="header-sticky-container">
    <div class="header-logo">
      <h2><a href="http://artsy.github.io">Artsy</a></h2>
    </div>
    <div class="header-search">
      
        <h2>Engineering Blog</h2>
        <span>
  <form action="/search" method="get">
    <input type="hidden" value="010245880960712892902:tnjd4ryb3ci" name="cx"/>
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </form>

</span>
      
    </div>
  </div>
</div>
</header>
  <div class="header-hamburger">
    <button class="cmn-toggle-switch cmn-toggle-switch__htx">
      <span>toggle menu</span>
    </button>
  </div>
  <div id="main">
    <div id="content">

      <div class="blog-index">
  
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/09/13/on-grid-thumbnails/">
        
        
          <h2 class="entry-title">On Grid Thumbnails</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p><img src="/images/2012-09-13-on-grid-thumbnails/grid.jpg"></p>

<p>Artsy Folio, our free iPad app for Gallery Partners, had been in the App Store for a couple of weeks before the iPad with a Retina display was announced. This had been something we expected internally and felt the application would be ready. We had all our image assets available in <em>@2x</em> versions and an image pipeline that would take scaling into account. With that in mind, we changed our artwork grid view to show a double resolution image. Finally, once we were happy that it worked fine on the simulator, we sent the build off to Apple for review.</p>

<p>The app passed review, and was Retina-ready before the actual release. But within hours of getting our hands on a real Retina iPad, we had to pull the app. This post will explain why, and what we did to work it out.</p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/09/13/on-grid-thumbnails/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-09-13T16:40:00+01:00" pubdate>Sep. 13<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/09/12/how-artsy-builds-experiments-labs-and-easter-eggs/">
        
        
          <h2 class="entry-title">How Artsy Builds Labs, Experiments and Easter Eggs</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>At Artsy Engineering we encourage a culture of experimentation with something called <em>labs</em>.</p>

<p>A new feature released into production is usually only turned on for a handful of users. We get feedback from our own team and a tiny group of early adopters, iterate, fix bugs, toss failed experiments and work on promoting complete, well behaved features to all users. The labs infrastructure gives us a chance to sleep on an idea and polish details. It also allows us to make progress continuously and flip a switch on the very last day.</p>

<p>My favorite labs features push our collective imagination and give birth to productive brainstorms around coffee at a popular startup hangout around the corner from our Manhattan office. But the team&#8217;s favorite labs are, by far, those that ship as easter eggs. These are fun and sometimes useful features that don&#8217;t make much business sense. So, before I explain our rudimentary labs system, I want to invite you to our easter egg hunt. Check out <a href="https://artsy.net/humans.txt">https://artsy.net/humans.txt</a> for instructions.</p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/09/12/how-artsy-builds-experiments-labs-and-easter-eggs/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-09-12T21:21:00+01:00" pubdate>Sep. 12<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/08/16/testing-with-delayed-jobs/">
        
        
          <h2 class="entry-title">Testing With Delayed Jobs</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>A mean bug made it into our production environment. It wasn&#8217;t caught by our extensive test suite and caused thousands of emails to be sent to a handful of people. The root cause was an unfortunate combination of <a href="https://github.com/plataformatec/devise">Devise</a>, <a href="https://github.com/collectiveidea/delayed_job">DelayedJob</a> and, of course, our own code. It was an easy fix, but nobody ever wants this to happen again.</p>

<p>tl;dr DelayedJob says it&#8217;s possible to set <code>Delayed::Worker.delay_jobs = false</code> for your tests. Don&#8217;t do it.</p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/08/16/testing-with-delayed-jobs/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-08-16T21:21:00+01:00" pubdate>Aug. 16<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/08/14/on-objective-c-code-standards/">
        
        
          <h2 class="entry-title">On Our Objective-C Code Standards</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>With the release of Xcode 4.4 I&#8217;ve taken a look back at our existing code standards and tried to come up with something that is cleaner and more elegant. Here are a few of the ideas I&#8217;ve been using to modernize the codebase.</p>

<h3>Remove private method declarations and use class extensions to add ivars.</h3>

<p>First to get chopped by the deletion button are private method declarations. After Xcode 4.2 came out we took to using the class extension feature to add private method declarations at the top of implementation files. This was a nice way of keeping private methods out of the header files. Now that the compiler will check for pre-existing method signatures within the same object there&#8217;s no need to define their interfaces.</p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/08/14/on-objective-c-code-standards/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-08-14T14:23:00+01:00" pubdate>Aug. 14<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/07/10/on-demand-jenkins-slaves-with-amazon-ec2/">
        
        
          <h2 class="entry-title">On-Demand Jenkins Slaves With Amazon EC2</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>The <a href="http://artsy.net">Artsy</a> team faithfully uses <a href="http://jenkins-ci.org">Jenkins</a> for continuous integration. <a href="http://artsy.github.com/blog/2012/05/27/using-jenkins-for-ruby-and-ruby-on-rails-teams/">As we&#8217;ve described before</a>, our Jenkins master and 8 slaves run on Linode. This arrangement has at least a few drawbacks:</p>

<ul>
<li>Our Linode servers are manually configured. They require frequent maintenance, and inconsistencies lead to surprising build failures.</li>
<li>The fixed set of slaves don&#8217;t match the pattern of our build jobs: jobs get backed up during the day, but servers are mostly unused overnight and on weekends.</li>
</ul>


<p>The <a href="https://wiki.jenkins-ci.org/display/JENKINS/Amazon+EC2+Plugin">Amazon EC2 Plugin</a> allowed us to replace those slaves with a totally scripted environment. Now, slaves are spun up in the cloud whenever build jobs need them.</p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/07/10/on-demand-jenkins-slaves-with-amazon-ec2/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-07-10T13:30:00+01:00" pubdate>Jul. 10<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/07/05/spend-time-with-your-site/">
        
        
          <h2 class="entry-title">Spend Time With Your Site</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>Empathy with end users is critical when developing consumer-facing software. Many go <a href="http://innonate.com/2011/03/09/hackers-the-canon-of-consumer-facing-products/">even</a> <a href="http://www.uie.com/articles/self_design/">further</a> and argue that you should <em>be</em> your own user to effectively deliver the best experience.</p>

<blockquote><p><em>I&#8217;d encourage anyone starting a startup to become one of its users, however unnatural it seems.</em></p>

<p>&mdash; Paul Graham <a href="http://paulgraham.com/organic.html">Organic Startup Ideas</a></p></blockquote>

<p>In practice, though, this can be difficult:</p>

<ul>
<li>As a developer, you&#8217;re just not representative of the intended audience.</li>
<li>You&#8217;re [appropriately] focused on the product&#8217;s next iteration, while your audience is occupied with the current state.</li>
<li>You spend countless hours focused on product details&mdash;of course it&#8217;s a challenge to empathize with a casual visitor&#8217;s first impression.</li>
</ul>


<h2>Keeping it Real</h2>

<p>We&#8217;ve tried some best practices to overcome these tendencies. User feedback is emailed to everyone in the company. Engineers share customer support responsibilities. But one simple tool has been surprisingly useful: we stole a page from the agile development handbook and built an <a href="http://alistair.cockburn.us/Information+radiator">information radiator</a>. Like a <a href="http://en.wikipedia.org/wiki/Kanban_board">kanban board</a>, news ticker, or <a href="https://demo.geckoboard.com/dashboard/B6782E562794C2F2/">analytics wall board</a>, our information radiator gives us an ambient awareness of end users&#8217; experiences. How?</p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/07/05/spend-time-with-your-site/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-07-05T10:51:00+01:00" pubdate>Jul. 5<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/06/25/replacing-hashbang-routes-with-pushstate/">
        
        
          <h2 class="entry-title">Replacing #! Routes With PushState Using Backbone.js</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><blockquote><p>The only constant is change, continuing change, inevitable change, that is the dominant factor in society
[and web apps!] today. No sensible decision can be made any longer without taking into account not only
the world as it is, but the world as it will be.</p>

<p>&ndash; Isaac Asimov</p></blockquote>

<h2>R.I.P #!</h2>

<p>It did not take us long to discover we shared the concerns of Twitter&#8217;s
<a href="http://danwebb.net/2011/5/28/it-is-about-the-hashbangs">Dan Webb on hashbang routes</a>,
but it was almost a year before we were able to remove them from Artsy. Here&#8217;s how it went down.</p>

<p>Artsy relies on the <a href="http://documentcloud.github.com/backbone/">Backbone.js</a> framework for our client application
which offers a solid pushState routing scheme. This includes a seamless hashtag fallback for
<a href="http://caniuse.com/#feat=history">browsers that don&#8217;t support the HTML5 History API</a> (looking at you IE 9).</p>

<p>The pushState routing is optional, but <em>&#8220;the world as it should be&#8221;</em> suggests we say &#8220;Yes!&#8221; (or true) to pushState.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">Backbone</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">start</span><span class="p">({</span> <span class="nv">pushState: </span><span class="kc">true</span> <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>




</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/06/25/replacing-hashbang-routes-with-pushstate/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-06-25T11:35:00+01:00" pubdate>Jun. 25<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/05/30/restful-api-caching-with-garner/">
        
        
          <h2 class="entry-title">RESTful API Caching With Garner</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>Implementing server-side RESTful API caching is hard. In a straightforward API all the expiry decisions can be made automatically based on the URL, but most real world APIs that add requirements around object relationships or user authorization make caching particularly challenging.</p>

<p>At <a href="http://goruco.com/">GoRuCo</a> we open-sourced <a href="http://github.com/artsy/garner">Garner</a>, a cache implementation of the concepts described in this post. To &#8220;garner&#8221; means to gather data from various sources and to make it readily available in one place, kind-of like a cache! Garner works today with the <a href="http://github.com/intridea/grape">Grape API framework</a> and the <a href="http://github.com/mongoid/mongoid">Mongoid ODM</a>. We encourage you to fork the project, extend our library to other systems and contribute your code back, if you find it useful.</p>

<p>Garner implements the Artsy API caching cookbook that has been tried by fire in production.</p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/05/30/restful-api-caching-with-garner/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-05-30T21:21:00+01:00" pubdate>May. 30<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/05/27/using-jenkins-for-ruby-and-ruby-on-rails-teams/">
        
        
          <h2 class="entry-title">Using Jenkins for Ruby and Ruby-on-Rails Teams</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>The <a href="http://jenkins-ci.org">Jenkins CI</a> project has grown tremendously in the past few months. There&#8217;re now hundreds of plugins and an amazing engaged community. Artsy is a happy user and proud contributor to this effort with the essential <a href="https://wiki.jenkins-ci.org/display/JENKINS/AnsiColor+Plugin">jenkins-ansicolor plugin</a>, eliminating boring console output since 2011.</p>

<p>We are a continuous integration, deployment and devops shop and have been using Jenkins for over a year now. We&#8217;ve shared our experience at the <a href="http://www.cloudbees.com/juc2012.cb">Jenkins User Conference 2012</a> in <a href="http://www.slideshare.net/dblockdotorg/graduating-to-jenkins-ci-for-rubyonrails-teams">a presentation</a>. This blog post is an overview of how to get started with Jenkins for Ruby(-on-Rails) teams.</p>

<p><img src="/images/2012-05-27-using-jenkins-for-ruby-on-rails-teams/jenkins.png" title="[Artsy Jenkins CI]" ></p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/05/27/using-jenkins-for-ruby-and-ruby-on-rails-teams/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-05-27T08:15:00+01:00" pubdate>May. 27<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        
<div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2012/05/16/generating-automatic-plain-text-mime-parts-with-rails-actionmailer/">
        
        
          <h2 class="entry-title">Generating Automatic Plain Text MIME Parts With Rails ActionMailer</h2>
        
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>E-mail is one of the most important ways to engage your users. And every time you touch a user&#8217;s inbox, it reflects on your brand. But getting email right has become increasing difficult due to the complexities introduced by the thousands of web-based, desktop and mobile mail clients. Email formatting is like the &#8220;Hunger Games&#8221; where the major players include online services such as GMail, Yahoo, Hotmail or AOL, desktop clients such as Outlook and a myriad mobile devices ranging from iPhone and Android to Blackberry.</p>

<p>To deal with this landscape, the MIME standard allows systems to send e-mail with multiple parts: <code>plain/text</code> for business-efficient devices such as the Blackberry, and <code>text/html</code> for web-based e-mail readers, such as GMail. Furthermore, <code>ActionMailer</code> supports multiple template formats: create an <code>.html.haml</code> template along with a <code>.txt.haml</code> template to generate both. We also know that <code>text/plain</code> email helps deliverability, but we believe a disproportionately small amount of text e-mails are actually read - the vast majority of devices are capable of parsing some HTML.</p>

<p>Is it possible to avoid having to maintain two separate templates without sacrificing deliverability? How can we inject a <code>text/plain</code> part into HTML e-mail that is both useful and &#8220;free&#8221;?</p>

</div>
      
      
        <footer>
          <a rel="full-article" href="/blog/2012/05/16/generating-automatic-plain-text-mime-parts-with-rails-actionmailer/">Read More</a>
        </footer>
      
    
    
  </div>

  <div class="date-container">
    <div class="date">




  
<time datetime="2012-05-16T20:52:00+01:00" pubdate>May. 16<span>th</span>, 2012</time></div>
  </div>

  <footer>
  </footer>

</div>

      </article>
  
  <div class="pagination">
    
    <a href="/blog/page/8/">Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a href="/blog/page/6/">Newer</a>
    
  </div>
</div>


    </div>
  </div>
  <footer id="main_footer"><!-- <p>
  Copyright &copy; 2015 - Artsy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
 -->

 <div class="footer-navigation">
  <ul>
    <li><a href="https://developers.artsy.net/">API</a></li>
    <li><a href="https://www.artsy.net/jobs">Careers</a></li>
    <li><a href="http://twitter.com/artsyopensource">@artsyopensource</a></li>
    <li><a href="http://www.artsy.net/">Artsy.net</a></li>
  </ul>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'artsy';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script type="text/javascript">
  $(function() {

    // Main sticky header
    if ($(window).width() >= 700) {
      var sticky = new Waypoint.Sticky({
        element: $("#banner"),
        offset: -100
      });
    }

    // Toggle hamburger menu
    $('.header-hamburger').click(function() {
      $('#banner, .cmn-toggle-switch').toggleClass('active');
      if (location.pathname == '/open-source') {
        $('.header-search span').hide();
        $('#page-sidebar').toggle();
      }
    });

    // Toggle search focus on mobile
    $('input.search').focus(function() {
      $('#header').addClass('search-focused');
    }).blur(function() {
      $('#header').removeClass('search-focused');
    });

    
  });
</script>


</body>
</html>
